
TEST SUITE:

The directory cpuctl contains the tests related to the cpu controller.
At present there is only 1 testcase but it is the first test case in it's
series of test cases and further testcases will be added in the forthcoming
release of LTP

TEST AIM:

The aim of the test is to find any dependency of cpu controller on exact value
of shares to schedule the tasks. For example if there are two groups running
1 task each then they must get the cpu time in the same ratio irrespective of
the share values i.e. share ratios 1:2, 10:20, 100:200, 1000:2000 etc should
give the same cpu usage for each group.

FILES DESCRIPTION:

cpuctl_enabled_check.sh
-----------------------
This file is in 1 directory up and is the threshold to run the test.
This script file checks the kernel version and if FAIR_GROUP_SCHEDULER has been
compiled in the kernel. If not then the test is not run and user is asked if
he wants the new kernel be compiled with proper configuration and then run the test.

cpuctl_test01.c
---------------
The test case for cpu controller testing. This basicaly runs a task in a group
under cpu controller. Each task runs for an interval TIME_INTERVAL seconds and
reports the total time it could run on all cpus(for convinience given in % ).

After say n TIME_INTERVAL it modifies it's shares and again report the cpu
usage.

run_cpuctl_test.sh
----------
This file contains the script which does setup for the test. It creates a
/dev/cpuctl directory, mounts cgroup filesystem on it with cpu. It then creates
a number(n) of groups in /dev/cpuctl and fires (n) tasks to run at the same time.

Makefile
--------

The usual makefile for this directory

README:
--------
The one you have gone through

$LTPROOT/output/cpuctl_results.txt
--------------
This file will be created to log the results once the test is run. It contains the test
results which are numbers and following is a description which will help to understand
the results.

The cpu time for each group(task ) is calculated in %. There are two outcomes of the test:

1. A group should get cpu time in the same ratio as it's shares.

2. This time should not change with the changes in share values while the ratio in those
   values is same.

NOTE: In case 1 a variation of 1-2 % is acceptable.


