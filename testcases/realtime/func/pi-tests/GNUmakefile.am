bin_PROGRAMS = \
	testpi-0

if HAVE_PTHREAD_MUTEXATTR_SETPROTOCOL
bin_PROGRAMS += \
	testpi-1 \
	testpi-2 \
	testpi-4 \
	testpi-5 \
	testpi-7
endif

if HAVE_PTHREAD_MUTEXATTR_SETROBUST_NP
bin_PROGRAMS += \
	testpi-6 \
	sbrk_mutex
endif

AM_CPPFLAGS = \
	-I$(top_srcdir)/include \
	-I$(top_builddir)/include \
	-I$(DESTDIR)/usr/include/nptl \
	-D_GNU_SOURCE

AM_CFLAGS = \
	-O2

LDADD = \
	$(top_builddir)/lib/libjvmsim.a \
	$(top_builddir)/lib/librttest.a \
	$(top_builddir)/lib/libstats.a

AM_LDFLAGS = \
	-L$(DESTDIR)/usr/lib/nptl \
	-lpthread \
	-lrt \
	-lm

testpi_7_CPPFLAGS = \
	$(AM_CPPFLAGS) \
	-I$(srcdir)

EXTRA_DIST = \
	test-skeleton.c

MAINTAINERCLEANFILES = \
	GNUmakefile.in

